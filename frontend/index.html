<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Management</title>
</head>
<body>
    <h1>Job Management</h1>
    
    <!-- Add Job Form -->
    <h2>Add Job</h2>
    <form id="addJobForm">
        <label for="id">ID:</label>
        <input type="text" id="id" name="id"><br>
        <label for="title">Title:</label>
        <input type="text" id="title" name="title"><br>
        <label for="company">Company:</label>
        <input type="text" id="company" name="company"><br>
        <label for="location">Location:</label>
        <input type="text" id="location" name="location"><br>
        <label for="salary">Salary:</label>
        <input type="number" id="salary" name="salary"><br>
        <button type="button" onclick="addJob()">Add Job</button>
    </form>

    <!-- Get All Jobs Button -->
    <h2>Get All Jobs</h2>
    <button type="button" onclick="getAllJobs()">Get All Jobs</button>

    <!-- Display All Jobs -->
    <h2>All Jobs</h2>
    <ul id="jobList"></ul>

    <!-- JavaScript Code -->
    <script>
        function addJob() {
            var id = document.getElementById("id").value;
            var title = document.getElementById("title").value;
            var company = document.getElementById("company").value;
            var location = document.getElementById("location").value;
            var salary = document.getElementById("salary").value;

            // Send request to backend server to add job
            fetch('http://localhost:50051/addJob', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    id: id,
                    title: title,
                    company: company,
                    location: location,
                    salary: parseInt(salary)
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log(data); // Log response from server
                // Optionally, update UI based on response
            })
            .catch(error => console.error('Error:', error));
        }

        function getAllJobs() {
            // Send request to backend server to get all jobs
            fetch('http://localhost:50051/getAllJobs')
            .then(response => response.json())
            .then(data => {
                console.log(data); // Log response from server
                // Update UI to display all jobs
                var jobList = document.getElementById("jobList");
                jobList.innerHTML = ""; // Clear existing list
                data.forEach(job => {
                    var listItem = document.createElement("li");
                    listItem.textContent = `ID: ${job.id}, Title: ${job.title}, Company: ${job.company}, Location: ${job.location}, Salary: ${job.salary}`;
                    jobList.appendChild(listItem);
                });
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
